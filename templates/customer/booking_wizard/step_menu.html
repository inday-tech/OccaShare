{% extends "customer/booking_wizard/wizard_base.html" %}

{% block title %}Select Menu - OccaServe{% endblock %}

{% block content %}
<div class="wizard-header-content">
    <h2 class="wizard-title font-playfair">Select Your Menu</h2>
    <p class="wizard-subtitle">Choose the perfect catering package from {{ caterer.business_name }} for your event.</p>
</div>

<div class="packages-grid"
    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2.5rem;">
    {% for pkg in packages %}
    <div class="package-wizard-card"
        style="background: var(--white); border-radius: 1.5rem; overflow: hidden; box-shadow: var(--shadow-md); border: 1px solid var(--border-color); transition: all 0.3s ease; display: flex; flex-direction: column;">
        <div
            style="height: 220px; background-image: url('{{ pkg.image_url or 'https://images.unsplash.com/photo-1555244162-803834f70033?q=80&w=2070&auto=format&fit=crop' }}'); background-size: cover; background-position: center; position: relative;">
            <div
                style="position: absolute; top: 1.5rem; right: 1.5rem; background: rgba(255, 255, 255, 0.95); padding: 0.5rem 1rem; border-radius: 2rem; font-weight: 700; color: var(--primary-color); box-shadow: var(--shadow-sm); backdrop-filter: blur(5px);">
                {% if pkg.price_unit == 'per_guest' %}
                ₱{{ "{:,.2f}".format(pkg.price) }} / guest
                {% else %}
                ₱{{ "{:,.2f}".format(pkg.price) }} total
                {% endif %}
            </div>
        </div>
        <div style="padding: 2rem; flex: 1; display: flex; flex-direction: column;">
            <h4 style="font-size: 1.5rem; margin-bottom: 0.75rem;">{{ pkg.name }}</h4>
            <p style="color: var(--text-light); line-height: 1.6; margin-bottom: 2rem; flex: 1;">{{ pkg.description }}
            </p>

            <form action="/bookings/step/menu" method="POST">
                <input type="hidden" name="package_id" value="{{ pkg.id }}">
                <button type="submit" class="btn-primary" style="width: 100%; border-radius: 1rem; padding: 1.25rem;">
                    Select This Package <i class="fas fa-chevron-right"
                        style="margin-left: 0.5rem; font-size: 0.8rem;"></i>
                </button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>

<div class="wizard-actions" style="margin-top: 5rem; justify-content: center;">
    <p style="color: var(--text-light); font-size: 0.9rem;">Need a custom package? <a href="/caterers/{{ caterer.id }}"
            style="color: var(--primary-color); font-weight: 600;">Contact the caterer</a></p>
</div>
{% endblock %}
